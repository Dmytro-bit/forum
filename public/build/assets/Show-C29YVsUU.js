import{S as b,r as d,j as e,a as f,J as r,b as N}from"./app-D4gpk4fT.js";function v({thread:a,posts:n,sidebarThreads:i,auth:t}){const{data:l,setData:c,reset:o}=b({body:""}),[x,h]=d.useState(n);d.useEffect(()=>(window.Echo.channel(`thread.${a.id}`).listen("PostCreated",j=>{h(u=>[...u,j])}),()=>{window.Echo.leaveChannel(`thread.${a.id}`)}),[a.id]);const m=async()=>{if(l.body.trim())try{await N.post(route("threads.posts.store",a.id),{body:l.body}),o(),c("body","")}catch(s){console.error(s)}};return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:a.title}),e.jsx("header",{className:"bg-green-800 text-white py-4",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Forum"}),e.jsx("nav",{children:e.jsxs("ul",{className:"flex space-x-4",children:[e.jsx(r,{href:"/dashboard",className:"hover:underline",children:"Dashboard"}),e.jsx("li",{children:e.jsx(r,{href:"#",className:"hover:underline",children:"Forum"})}),e.jsx("li",{children:e.jsx(r,{href:"#",className:"hover:underline",children:"About"})})]})})]})}),e.jsxs("div",{className:"flex h-screen",children:[e.jsxs("aside",{className:"w-1/4 bg-gray-100 p-4 overflow-auto",children:[e.jsx("h6",{className:"font-bold mb-2",children:"Active Threads"}),e.jsx("ul",{children:i.map(s=>e.jsx("li",{className:"mb-1",children:e.jsx(r,{href:route("threads.show",s.id),className:s.id===a.id?"text-white bg-green-700 p-2 rounded block":"p-2 block hover:bg-gray-200 rounded",children:s.title})},s.id))}),t.user&&e.jsx(r,{href:route("threads.create"),className:"mt-4 block text-green-600",children:"+ New Thread"})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("header",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h4",{className:"font-semibold",children:a.title}),e.jsxs("div",{children:[e.jsx("button",{className:"mx-1",children:e.jsx("i",{className:"fas fa-video"})}),e.jsx("button",{className:"mx-1",children:e.jsx("i",{className:"fas fa-phone"})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:x.map(s=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("img",{src:s.author.avatar||"/images/default-avatar.png",alt:"avatar",className:"w-10 h-10 rounded-full"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-bold",children:s.author.name}),e.jsx("span",{className:"text-xs text-gray-500",children:s.created_at})]}),e.jsx("p",{className:"mt-1 text-gray-800 break-words",children:s.body})]})]},s.id))}),t.user&&e.jsxs("div",{className:"p-4 border-t flex items-center space-x-3",children:[e.jsx("textarea",{value:l.body,onChange:s=>c("body",s.target.value),placeholder:"Type your programming query here...",className:"flex-1 rounded border-gray-300 p-2",rows:3}),e.jsxs("button",{type:"button",onClick:m,disabled:!l.body.trim(),className:"bg-green-600 text-white px-4 py-2 rounded",children:["Send",e.jsx("i",{className:"fas fa-paper-plane ml-2"})]})]})]})]})]})}export{v as default};
